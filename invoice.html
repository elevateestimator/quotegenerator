<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Endura Roofing — Invoice</title>
  <link rel="stylesheet" href="invoice.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
  <script defer src="invoice.patched.js"></script>
</head>
<body>
  <!-- Toolbar (hidden in print/PDF) -->
  <div class="toolbar no-print">
    <div class="left">
      <button id="btn-add-line">+ Item</button>
      <button id="btn-clear">Clear</button>
      <label class="switch no-print" title="Show/Hide Discount">
        <input type="checkbox" id="discount-toggle" checked />
        <span>Discount</span>
      </label>
    </div>
    <div class="right">
      <button id="btn-preview" title="Lock fields for a clean on-screen preview">Preview</button>
      <button id="btn-download" class="primary">Download PDF</button>
      <button id="btn-print">Print</button>
    </div>
  </div>

  <!-- Letter page -->
  <main id="page" class="page">
    <!-- Header -->
    <header class="doc-header avoid-break">
      <div class="brand-row">
        <img src="logo.png" alt="Endura Roofing" class="logo" />
        <div class="brand-meta">
          <input class="company-name" type="text" value="Endura Roofing" data-bind="company_name" />
          <div class="contact-list">
            <input type="text" value="230 Spencer Ave" data-bind="company_addr1" placeholder="Address line 1" />
            <input type="text" value="Thornton" data-bind="company_addr2" placeholder="City / Province" />
            <input type="text" value="705-903-7663" data-bind="company_phone" placeholder="Phone" />
            <input type="text" value="info@enduraroofing.ca" data-bind="company_email" placeholder="Email" />
            <input type="text" value="enduraroofing.ca" data-bind="company_web" placeholder="Website" />
            <input type="text" value="74055 2823 RT0001" data-bind="company_hst" placeholder="HST No." />
          </div>
        </div>
      </div>

      <div class="meta-and-status">
        <div class="meta-grid">
          <label>Invoice #<input type="text" placeholder="INV‑2025‑001" data-bind="invoice_no" /></label>
          <label>Date<input type="date" data-bind="invoice_date" /></label>
          <label>Due<input type="date" data-bind="invoice_due" /></label>
          <label>PO / Reference<input type="text" placeholder="Optional" data-bind="po_no" /></label>
        </div>
        <div class="status-wrap">
          <span id="status-badge" class="status-badge">DUE</span>
        </div>
      </div>
    </header>

    <!-- Parties / Project -->
    <section class="grid-2 avoid-break">
      <div class="card">
        <h3>Bill To</h3>
        <div class="stack-10">
          <input type="text" placeholder="Client / Company" data-bind="client_name" />
          <input type="text" placeholder="Contact Person" data-bind="client_contact" />
          <input type="text" placeholder="Phone" data-bind="client_phone" />
          <input type="text" placeholder="Email" data-bind="client_email" />
          <input type="text" placeholder="Billing Address" data-bind="client_addr" />
        </div>
      </div>
      <div class="card">
        <h3>Project</h3>
        <div class="stack-10">
          <input type="text" placeholder="Project Name" data-bind="project_name" />
          <input type="text" placeholder="Project Location" data-bind="project_location" />
          <textarea rows="3" placeholder="Project notes (optional)…" data-bind="project_overview">• For card payments, call 705‑903‑7663.</textarea>
        </div>
      </div>
    </section>

    <!-- Items -->
    <section class="card avoid-break">
      <h3>Items & Pricing</h3>
      <div class="table-wrap">
        <table id="items-table" class="items-table" aria-label="Line items">
          <colgroup>
            <col style="width: 16%" />
            <col style="width: auto" />
            <col style="width: 10%" />
            <col style="width: 14%" />
            <col style="width: 8%" />
            <col style="width: 16%" />
            <col style="width: 4%" />
          </colgroup>
          <thead>
            <tr>
              <th>Item</th>
              <th>Description</th>
              <th class="num">Qty</th>
              <th class="num">Unit</th>
              <th class="center">Tax</th>
              <th class="num">Line Total</th>
              <th class="no-print slim"></th>
            </tr>
          </thead>
          <tbody id="item-rows"></tbody>
        </table>
      </div>
    </section>

    <!-- Totals -->
    <section class="card totals avoid-break">
      <h3>Summary</h3>
      <div class="totals-grid" id="totals-grid">
        <div class="row" id="subtotal-row">
          <div class="label">Subtotal</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr">$</span><span class="amt" id="subtotal">0.00</span>
          </div>
        </div>

        <div class="row" id="discount-row">
          <div class="label">Discount</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr">$</span>
            <span class="amt amt-input">
              <select id="discount-type" aria-label="Discount type">
                <option value="amount">$</option>
                <option value="percent">%</option>
              </select>
              <input id="discount-value" type="text" inputmode="decimal" placeholder="0" />
            </span>
          </div>
        </div>

        <div class="row" id="taxrate-row">
          <div class="label">Tax Rate</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr curr-placeholder" aria-hidden="true">$</span>
            <span class="amt amt-input">
              <input id="tax-rate" type="text" inputmode="decimal" value="13" class="short" />
              <span class="suffix">%</span>
            </span>
          </div>
        </div>

        <div class="row" id="tax-row">
          <div class="label">HST</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr">$</span><span class="amt" id="tax-amount">0.00</span>
          </div>
        </div>

        <div class="row" id="fees-row">
          <div class="label">Additional Fees</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr">$</span>
            <span class="amt amt-input"><input id="fees" type="text" inputmode="decimal" placeholder="0.00" /></span>
          </div>
        </div>

        <div class="row total" id="grand-row">
          <div class="label">Total</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr">$</span><span class="amt" id="grand-total">0.00</span>
          </div>
        </div>

        <div class="row" id="paid-row">
          <div class="label">Paid to Date</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr">$</span>
            <span class="amt amt-input"><input id="paid" type="text" inputmode="decimal" placeholder="0.00" /></span>
          </div>
        </div>

        <div class="row due" id="due-row">
          <div class="label">Amount Due</div>
          <div class="spacer"></div>
          <div class="value">
            <span class="curr">$</span><span class="amt" id="amount-due">0.00</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Payment instructions -->
    <section class="card avoid-break">
      <h3>Payment Instructions</h3>
      <textarea rows="6" data-bind="payment_instructions">• Cheques payable to Endura Roofing.
• E-transfers to sales@enduraroofing.ca.
• HST No.: 74055 2823 RT0001
• Thank you for your business!</textarea>
    </section>

    <!-- Notes -->
    <section class="card avoid-break">
      <h3>Notes</h3>
      <textarea rows="5" data-bind="notes" placeholder="Add any invoice‑specific notes, change order references, etc."></textarea>
    </section>
  </main>

  <!-- Hidden root for clean PDF clone -->
  <div id="print-clone-root" class="visually-hidden" aria-hidden="true"></div>
</body>
</html>
